# 2025 - 11 - 19 

use classroom;

-- DCL
The main DCL commands in MySQL are:
GRANT: This command is used to assign specific privileges to a user or role. These privileges can include actions like SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, and more, on specific databases, tables, or even columns.

eg.. 
GRANT SELECT, INSERT ON database_name.table_name TO 'username'@'localhost';

REVOKE: This command is used to remove previously granted privileges from a user or role. It effectively takes away the access rights that were previously assigned using the GRANT command.
eg.. 
    REVOKE DELETE ON database_name.table_name FROM 'username'@'localhost';

| Command              | Purpose                 |
| -------------------- | ----------------------- |
| **CREATE USER**      | Create a new MySQL user |
| **GRANT**            | Give permissions        |
| **REVOKE**           | Remove permissions      |
| **FLUSH PRIVILEGES** | Reload permissions      |
| **DROP USER**        | Delete user             |


‚úÖ Creating a New User in MySQL	

-- Create users 
CREATE USER 'jroshan'@'localhost' IDENTIFIED BY 'jroshan!$&98';

-- If user should connect from any location:
CREATE USER 'john'@'%' IDENTIFIED BY 'password123';

üîê Common Permission Examples
‚úî Read-only user (SELECT only)
GRANT SELECT ON mydb.* TO 'reader'@'localhost';

GRANT SELECT, INSERT, UPDATE ON mydb.* TO 'john'@'localhost';
FLUSH PRIVILEGES;

‚úî Developer access (SELECT, INSERT, UPDATE, DELETE)
GRANT SELECT, INSERT, UPDATE, DELETE ON mydb.* TO 'devuser'@'localhost';

‚úî Admin access (full privileges)
GRANT ALL PRIVILEGES ON *.* TO 'admin'@'localhost' WITH GRANT OPTION;

‚ùå Remove user
DROP USER 'john'@'localhost';



Example: Allow user to SELECT data
GRANT SELECT ON mydb.* TO 'john'@'localhost';


Example: Give full access to one table
GRANT SELECT, INSERT, UPDATE, DELETE
ON mydb.employees
TO 'john'@'localhost';

Give all privileges on a database
GRANT ALL PRIVILEGES ON mydb.* TO 'john'@'localhost';

2Ô∏è‚É£ REVOKE

Removes permissions from a user.
REVOKE INSERT, UPDATE ON mydb.employees FROM 'john'@'localhost';


3Ô∏è‚É£ FLUSH PRIVILEGES

After GRANT or REVOKE, always run:
FLUSH PRIVILEGES;

-- Grant 
GRANT SELECT, INSERT ON database_name.table_name TO 'root'@'localhost';


‚úÖ 1Ô∏è‚É£ Enable GENERAL LOG (captures all queries from all users)

-- Enable general log:
SET GLOBAL general_log = 1;
SET GLOBAL log_output = 'TABLE';


-- View queries executed by a specific user:
SELECT event_time, user_host, argument 
FROM mysql.general_log
WHERE user_host LIKE 'jroshan@%'
ORDER BY event_time DESC;


select * from mysql.general_log;
